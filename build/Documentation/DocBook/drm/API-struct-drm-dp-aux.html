<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>struct drm_dp_aux</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="Linux DRM Developer's Guide"><link rel="up" href="ch02s05.html#idm9920" title="Display Port Helper Functions Reference"><link rel="prev" href="API-struct-drm-dp-aux-msg.html" title="struct drm_dp_aux_msg"><link rel="next" href="API-drm-dp-dpcd-readb.html" title="drm_dp_dpcd_readb"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center"><span class="phrase">struct drm_dp_aux</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="API-struct-drm-dp-aux-msg.html">Prev</a> </td><th width="60%" align="center">Display Port Helper Functions Reference</th><td width="20%" align="right"> <a accesskey="n" href="API-drm-dp-dpcd-readb.html">Next</a></td></tr></table><hr></div><div class="refentry"><a name="API-struct-drm-dp-aux"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>struct drm_dp_aux — 
     DisplayPort AUX channel
 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><pre class="programlisting">
struct drm_dp_aux {
  const char * name;
  struct i2c_adapter ddc;
  struct device * dev;
  struct mutex hw_mutex;
  ssize_t (* transfer) (struct drm_dp_aux *aux,struct drm_dp_aux_msg *msg);
};  </pre></div><div class="refsect1"><a name="idm10015"></a><h2>Members</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">name</span></dt><dd><p>
   user-visible name of this AUX channel and the I2C-over-AUX adapter
      </p></dd><dt><span class="term">ddc</span></dt><dd><p>
   I2C adapter that can be used for I2C-over-AUX communication
      </p></dd><dt><span class="term">dev</span></dt><dd><p>
   pointer to struct device that is the parent for this AUX channel
      </p></dd><dt><span class="term">hw_mutex</span></dt><dd><p>
   internal mutex used for locking transfers
      </p></dd><dt><span class="term">transfer</span></dt><dd><p>
   transfers a message representing a single AUX transaction
      </p></dd></dl></div></div><div class="refsect1"><a name="idm10038"></a><h2>Description</h2><p>
   The .dev field should be set to a pointer to the device that implements
   the AUX channel.
   </p><p>

   The .name field may be used to specify the name of the I2C adapter. If set to
   NULL, <code class="function">dev_name</code> of .dev will be used.
   </p><p>

   Drivers provide a hardware-specific implementation of how transactions
   are executed via the .<code class="function">transfer</code> function. A pointer to a drm_dp_aux_msg
   structure describing the transaction is passed into this function. Upon
   success, the implementation should return the number of payload bytes
   that were transferred, or a negative error-code on failure. Helpers
   propagate errors from the .<code class="function">transfer</code> function, with the exception of
   the -EBUSY error, which causes a transaction to be retried. On a short,
   helpers will return -EPROTO to make it simpler to check for failure.
   </p><p>

   An AUX channel can also be used to transport I2C messages to a sink. A
   typical application of that is to access an EDID that's present in the
   sink device. The .<code class="function">transfer</code> function can also be used to execute such
   transactions. The <code class="function">drm_dp_aux_register_i2c_bus</code> function registers an
   I2C adapter that can be passed to <code class="function">drm_probe_ddc</code>. Upon removal, drivers
   should call <code class="function">drm_dp_aux_unregister_i2c_bus</code> to remove the I2C adapter.
   </p><p>

   Note that the aux helper code assumes that the .<code class="function">transfer</code> function
   only modifies the reply field of the drm_dp_aux_msg structure.  The
   retry logic and i2c helpers assume this is the case.
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="API-struct-drm-dp-aux-msg.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch02s05.html#idm9920">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="API-drm-dp-dpcd-readb.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"><span class="phrase">struct drm_dp_aux_msg</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> <span class="phrase">drm_dp_dpcd_readb</span></td></tr></table></div></body></html>
