<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Legacy Support Code</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="Linux DRM Developer's Guide"><link rel="up" href="drmInternals.html" title="Chapter 2. DRM Internals"><link rel="prev" href="ch02s08.html" title="Open/Close, File Operations and IOCTLs"><link rel="next" href="drmExternals.html" title="Chapter 3. Userland interfaces"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Legacy Support Code</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s08.html">Prev</a> </td><th width="60%" align="center">Chapter 2. DRM Internals</th><td width="20%" align="right"> <a accesskey="n" href="drmExternals.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm16003"></a>Legacy Support Code</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="ch02s09.html#idm16006">Legacy Suspend/Resume</a></span></dt><dt><span class="sect2"><a href="ch02s09.html#idm16013">Legacy DMA Services</a></span></dt></dl></div><p>
      The section very briefly covers some of the old legacy support code which
      is only used by old DRM drivers which have done a so-called shadow-attach
      to the underlying device instead of registering as a real driver. This
      also includes some of the old generic buffer management and command
      submission code. Do not use any of this in new and modern drivers.
    </p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm16006"></a>Legacy Suspend/Resume</h3></div></div></div><p>
	The DRM core provides some suspend/resume code, but drivers wanting full
	suspend/resume support should provide save() and restore() functions.
	These are called at suspend, hibernate, or resume time, and should perform
	any state save or restore required by your device across suspend or
	hibernate states.
      </p><pre class="synopsis">int (*suspend) (struct drm_device *, pm_message_t state);
  int (*resume) (struct drm_device *);</pre><p>
	Those are legacy suspend and resume methods which
	<span class="emphasis"><em>only</em></span> work with the legacy shadow-attach driver
	registration functions. New driver should use the power management
	interface provided by their bus type (usually through
	the struct <span class="structname">device_driver</span> dev_pm_ops) and set
	these methods to NULL.
      </p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm16013"></a>Legacy DMA Services</h3></div></div></div><p>
	This should cover how DMA mapping etc. is supported by the core.
	These functions are deprecated and should not be used.
      </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s08.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="drmInternals.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="drmExternals.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Open/Close, File Operations and IOCTLs </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 3. Userland interfaces</td></tr></table></div></body></html>
