<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>blk_pre_runtime_suspend</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="The Linux Kernel API"><link rel="up" href="blkdev.html" title="Chapter 14. Block Devices"><link rel="prev" href="API-blk-pm-runtime-init.html" title="blk_pm_runtime_init"><link rel="next" href="API-blk-post-runtime-suspend.html" title="blk_post_runtime_suspend"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center"><span class="phrase">blk_pre_runtime_suspend</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="API-blk-pm-runtime-init.html">Prev</a> </td><th width="60%" align="center">Chapter 14. Block Devices</th><td width="20%" align="right"> <a accesskey="n" href="API-blk-post-runtime-suspend.html">Next</a></td></tr></table><hr></div><div class="refentry"><a name="API-blk-pre-runtime-suspend"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>blk_pre_runtime_suspend — 
     Pre runtime suspend check
 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tr><td><code class="funcdef">int <b class="fsfunc">blk_pre_runtime_suspend </b>(</code></td><td>struct request_queue * <var class="pdparam">q</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div></div><div class="refsect1"><a name="idm26901"></a><h2>Arguments</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="parameter"><code>q</code></em></span></dt><dd><p>
     the queue of the device
    </p></dd></dl></div></div><div class="refsect1"><a name="idm26909"></a><h2>Description</h2><p>
   This function will check if runtime suspend is allowed for the device
   by examining if there are any requests pending in the queue. If there
   are requests pending, the device can not be runtime suspended; otherwise,
   the queue's status will be updated to SUSPENDING and the driver can
   proceed to suspend the device.
   </p><p>

   For the not allowed case, we mark last busy for the device so that
   runtime PM core will try to autosuspend it some time later.
   </p><p>

   This function should be called near the start of the device's
   runtime_suspend callback.
</p></div><div class="refsect1"><a name="idm26914"></a><h2>Return</h2><p>
   0		- OK to runtime suspend the device
   -EBUSY	- Device should not be runtime suspended
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="API-blk-pm-runtime-init.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="blkdev.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="API-blk-post-runtime-suspend.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"><span class="phrase">blk_pm_runtime_init</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> <span class="phrase">blk_post_runtime_suspend</span></td></tr></table></div></body></html>
