<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>get_user_pages_fast</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="The Linux Kernel API"><link rel="up" href="mm.html#idm7194" title="The Slab Cache"><link rel="prev" href="API-memdup-user.html" title="memdup_user"><link rel="next" href="ch04s02.html" title="User Space Memory Access"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center"><span class="phrase">get_user_pages_fast</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="API-memdup-user.html">Prev</a> </td><th width="60%" align="center">The Slab Cache</th><td width="20%" align="right"> <a accesskey="n" href="ch04s02.html">Next</a></td></tr></table><hr></div><div class="refentry"><a name="API-get-user-pages-fast"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>get_user_pages_fast — 
     pin user pages in memory
 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tr><td><code class="funcdef">int <b class="fsfunc">get_user_pages_fast </b>(</code></td><td>unsigned long <var class="pdparam">start</var>, </td></tr><tr><td> </td><td>int <var class="pdparam">nr_pages</var>, </td></tr><tr><td> </td><td>int <var class="pdparam">write</var>, </td></tr><tr><td> </td><td>struct page ** <var class="pdparam">pages</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div></div><div class="refsect1"><a name="idm7874"></a><h2>Arguments</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="parameter"><code>start</code></em></span></dt><dd><p>
     starting user address
    </p></dd><dt><span class="term"><em class="parameter"><code>nr_pages</code></em></span></dt><dd><p>
     number of pages from start to pin
    </p></dd><dt><span class="term"><em class="parameter"><code>write</code></em></span></dt><dd><p>
     whether pages will be written to
    </p></dd><dt><span class="term"><em class="parameter"><code>pages</code></em></span></dt><dd><p>
     array that receives pointers to the pages pinned.
     Should be at least nr_pages long.
    </p></dd></dl></div></div><div class="refsect1"><a name="idm7897"></a><h2>Description</h2><p>
   Returns number of pages pinned. This may be fewer than the number
   requested. If nr_pages is 0 or negative, returns 0. If no pages
   were pinned, returns -errno.
   </p><p>

   get_user_pages_fast provides equivalent functionality to get_user_pages,
   operating on current and current-&gt;mm, with force=0 and vma=NULL. However
   unlike get_user_pages, it must be called without mmap_sem held.
   </p><p>

   get_user_pages_fast may take mmap_sem and page table locks, so no
   assumptions can be made about lack of locking. get_user_pages_fast is to be
   implemented in a way that is advantageous (vs <code class="function">get_user_pages</code>) when the
   user memory area is already faulted in and present in ptes. However if the
   pages have to be faulted in, it may turn out to be slightly slower so
   callers need to carefully consider what to use. On many architectures,
   get_user_pages_fast simply falls back to get_user_pages.
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="API-memdup-user.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="mm.html#idm7194">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch04s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"><span class="phrase">memdup_user</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> User Space Memory Access</td></tr></table></div></body></html>
