<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>usb_interface_id</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="USB Gadget API for Linux"><link rel="up" href="composite.html" title="Composite Device Framework"><link rel="prev" href="API-usb-function-activate.html" title="usb_function_activate"><link rel="next" href="API-usb-add-config.html" title="usb_add_config"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center"><span class="phrase">usb_interface_id</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="API-usb-function-activate.html">Prev</a> </td><th width="60%" align="center">Composite Device Framework</th><td width="20%" align="right"> <a accesskey="n" href="API-usb-add-config.html">Next</a></td></tr></table><hr></div><div class="refentry"><a name="API-usb-interface-id"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>usb_interface_id — 
     allocate an unused interface ID
 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tr><td><code class="funcdef">int <b class="fsfunc">usb_interface_id </b>(</code></td><td>struct usb_configuration * <var class="pdparam">config</var>, </td></tr><tr><td> </td><td>struct usb_function * <var class="pdparam">function</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div></div><div class="refsect1"><a name="idm2564"></a><h2>Arguments</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="parameter"><code>config</code></em></span></dt><dd><p>
     configuration associated with the interface
    </p></dd><dt><span class="term"><em class="parameter"><code>function</code></em></span></dt><dd><p>
     function handling the interface
    </p></dd></dl></div></div><div class="refsect1"><a name="idm2577"></a><h2>Context</h2><p>
   single threaded during gadget setup
</p></div><div class="refsect1"><a name="idm2580"></a><h2>Description</h2><p>
   <code class="function">usb_interface_id</code> is called from usb_function.<code class="function">bind</code> callbacks to
   allocate new interface IDs.  The function driver will then store that
   ID in interface, association, CDC union, and other descriptors.  It
   will also handle any control requests targeted at that interface,
   particularly changing its altsetting via <code class="function">set_alt</code>.  There may
   also be class-specific or vendor-specific requests to handle.
   </p><p>

   All interface identifier should be allocated using this routine, to
   ensure that for example different functions don't wrongly assign
   different meanings to the same identifier.  Note that since interface
   identifiers are configuration-specific, functions used in more than
   one configuration (or more than once in a given configuration) need
   multiple versions of the relevant descriptors.
   </p><p>

   Returns the interface ID which was allocated; or -ENODEV if no
   more interface IDs can be allocated.
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="API-usb-function-activate.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="composite.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="API-usb-add-config.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"><span class="phrase">usb_function_activate</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> <span class="phrase">usb_add_config</span></td></tr></table></div></body></html>
