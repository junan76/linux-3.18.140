<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>bus_for_each_dev</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="Linux Device Drivers"><link rel="up" href="ch02s02.html" title="Device Drivers Base"><link rel="prev" href="API-platform-create-bundle.html" title="platform_create_bundle"><link rel="next" href="API-bus-find-device.html" title="bus_find_device"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center"><span class="phrase">bus_for_each_dev</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="API-platform-create-bundle.html">Prev</a> </td><th width="60%" align="center">Device Drivers Base</th><td width="20%" align="right"> <a accesskey="n" href="API-bus-find-device.html">Next</a></td></tr></table><hr></div><div class="refentry"><a name="API-bus-for-each-dev"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>bus_for_each_dev — 
  device iterator.
 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tr><td><code class="funcdef">int <b class="fsfunc">bus_for_each_dev </b>(</code></td><td>struct bus_type * <var class="pdparam">bus</var>, </td></tr><tr><td> </td><td>struct device * <var class="pdparam">start</var>, </td></tr><tr><td> </td><td>void * <var class="pdparam">data</var>, </td></tr><tr><td> </td><td>int (*<var class="pdparam">fn</var>)
     <code>(</code>struct device *, void *<code>)</code><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div></div><div class="refsect1"><a name="idm15270"></a><h2>Arguments</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="parameter"><code>bus</code></em></span></dt><dd><p>
     bus type.
    </p></dd><dt><span class="term"><em class="parameter"><code>start</code></em></span></dt><dd><p>
     device to start iterating from.
    </p></dd><dt><span class="term"><em class="parameter"><code>data</code></em></span></dt><dd><p>
     data for the callback.
    </p></dd><dt><span class="term"><em class="parameter"><code>fn</code></em></span></dt><dd><p>
     function to be called for each device.
    </p></dd></dl></div></div><div class="refsect1"><a name="idm15293"></a><h2>Description</h2><p>
   Iterate over <em class="parameter"><code>bus</code></em>'s list of devices, and call <em class="parameter"><code>fn</code></em> for each,
   passing it <em class="parameter"><code>data</code></em>. If <em class="parameter"><code>start</code></em> is not NULL, we use that device to
   begin iterating from.
   </p><p>

   We check the return of <em class="parameter"><code>fn</code></em> each time. If it returns anything
   other than 0, we break out and return that value.
</p></div><div class="refsect1"><a name="idm15302"></a><h2>NOTE</h2><p>
   The device that returns a non-zero value is not retained
   in any way, nor is its refcount incremented. If the caller needs
   to retain this data, it should do so, and increment the reference
   count in the supplied callback.
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="API-platform-create-bundle.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch02s02.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="API-bus-find-device.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"><span class="phrase">platform_create_bundle</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> <span class="phrase">bus_find_device</span></td></tr></table></div></body></html>
