<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Device Drivers DMA Management</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="Linux Device Drivers"><link rel="up" href="devdrivers.html" title="Chapter 2. Device drivers infrastructure"><link rel="prev" href="API-subsys-virtual-register.html" title="subsys_virtual_register"><link rel="next" href="API-dma-buf-export-named.html" title="dma_buf_export_named"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Device Drivers DMA Management</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="API-subsys-virtual-register.html">Prev</a> </td><th width="60%" align="center">Chapter 2. Device drivers infrastructure</th><td width="20%" align="right"> <a accesskey="n" href="API-dma-buf-export-named.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm15847"></a>Device Drivers DMA Management</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="refentrytitle"><a href="API-dma-buf-export-named.html"><span class="phrase">dma_buf_export_named</span></a></span><span class="refpurpose"> — 
  Creates a new dma_buf, and associates an anon file with this buffer, so it can be exported. Also connect the allocator specific data and ops to the buffer. Additionally, provide a name string for exporter; useful in debugging.
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-buf-fd.html"><span class="phrase">dma_buf_fd</span></a></span><span class="refpurpose"> — 
     returns a file descriptor for the given dma_buf
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-buf-get.html"><span class="phrase">dma_buf_get</span></a></span><span class="refpurpose"> — 
     returns the dma_buf structure related to an fd
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-buf-put.html"><span class="phrase">dma_buf_put</span></a></span><span class="refpurpose"> — 
     decreases refcount of the buffer
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-buf-attach.html"><span class="phrase">dma_buf_attach</span></a></span><span class="refpurpose"> — 
     Add the device to dma_buf's attachments list; optionally, calls <code class="function">attach</code> of dma_buf_ops to allow device-specific attach functionality
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-buf-detach.html"><span class="phrase">dma_buf_detach</span></a></span><span class="refpurpose"> — 
     Remove the given attachment from dmabuf's attachments list; optionally calls <code class="function">detach</code> of dma_buf_ops for device-specific detach
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-buf-map-attachment.html"><span class="phrase">dma_buf_map_attachment</span></a></span><span class="refpurpose"> — 
     Returns the scatterlist table of the attachment; mapped into _device_ address space. Is a wrapper for <code class="function">map_dma_buf</code> of the dma_buf_ops.
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-buf-unmap-attachment.html"><span class="phrase">dma_buf_unmap_attachment</span></a></span><span class="refpurpose"> — 
     unmaps and decreases usecount of the buffer;might deallocate the scatterlist associated. Is a wrapper for <code class="function">unmap_dma_buf</code> of dma_buf_ops.
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-buf-begin-cpu-access.html"><span class="phrase">dma_buf_begin_cpu_access</span></a></span><span class="refpurpose"> — 
     Must be called before accessing a dma_buf from the cpu in the kernel context. Calls begin_cpu_access to allow exporter-specific preparations. Coherency is only guaranteed in the specified range for the specified access direction.
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-buf-end-cpu-access.html"><span class="phrase">dma_buf_end_cpu_access</span></a></span><span class="refpurpose"> — 
     Must be called after accessing a dma_buf from the cpu in the kernel context. Calls end_cpu_access to allow exporter-specific actions. Coherency is only guaranteed in the specified range for the specified access direction.
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-buf-kmap-atomic.html"><span class="phrase">dma_buf_kmap_atomic</span></a></span><span class="refpurpose"> — 
     Map a page of the buffer object into kernel address space. The same restrictions as for kmap_atomic and friends apply.
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-buf-kunmap-atomic.html"><span class="phrase">dma_buf_kunmap_atomic</span></a></span><span class="refpurpose"> — 
     Unmap a page obtained by dma_buf_kmap_atomic.
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-buf-kmap.html"><span class="phrase">dma_buf_kmap</span></a></span><span class="refpurpose"> — 
     Map a page of the buffer object into kernel address space. The same restrictions as for kmap and friends apply.
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-buf-kunmap.html"><span class="phrase">dma_buf_kunmap</span></a></span><span class="refpurpose"> — 
     Unmap a page obtained by dma_buf_kmap.
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-buf-mmap.html"><span class="phrase">dma_buf_mmap</span></a></span><span class="refpurpose"> — 
     Setup up a userspace mmap with the given vma
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-buf-vmap.html"><span class="phrase">dma_buf_vmap</span></a></span><span class="refpurpose"> — 
     Create virtual mapping for the buffer object into kernel address space. Same restrictions as for vmap and friends apply.
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-buf-vunmap.html"><span class="phrase">dma_buf_vunmap</span></a></span><span class="refpurpose"> — 
     Unmap a vmap obtained by dma_buf_vmap.
 </span></dt><dt><span class="refentrytitle"><a href="API-fence-context-alloc.html"><span class="phrase">fence_context_alloc</span></a></span><span class="refpurpose"> — 
  allocate an array of fence contexts
 </span></dt><dt><span class="refentrytitle"><a href="API-fence-signal-locked.html"><span class="phrase">fence_signal_locked</span></a></span><span class="refpurpose"> — 
     signal completion of a fence
 </span></dt><dt><span class="refentrytitle"><a href="API-fence-signal.html"><span class="phrase">fence_signal</span></a></span><span class="refpurpose"> — 
     signal completion of a fence
 </span></dt><dt><span class="refentrytitle"><a href="API-fence-wait-timeout.html"><span class="phrase">fence_wait_timeout</span></a></span><span class="refpurpose"> — 
     sleep until the fence gets signaled or until timeout elapses
 </span></dt><dt><span class="refentrytitle"><a href="API-fence-enable-sw-signaling.html"><span class="phrase">fence_enable_sw_signaling</span></a></span><span class="refpurpose"> — 
     enable signaling on fence
 </span></dt><dt><span class="refentrytitle"><a href="API-fence-add-callback.html"><span class="phrase">fence_add_callback</span></a></span><span class="refpurpose"> — 
     add a callback to be called when the fence is signaled
 </span></dt><dt><span class="refentrytitle"><a href="API-fence-remove-callback.html"><span class="phrase">fence_remove_callback</span></a></span><span class="refpurpose"> — 
     remove a callback from the signaling list
 </span></dt><dt><span class="refentrytitle"><a href="API-fence-default-wait.html"><span class="phrase">fence_default_wait</span></a></span><span class="refpurpose"> — 
     default sleep until the fence gets signaled or until timeout elapses
 </span></dt><dt><span class="refentrytitle"><a href="API-fence-init.html"><span class="phrase">fence_init</span></a></span><span class="refpurpose"> — 
     Initialize a custom fence.
 </span></dt><dt><span class="refentrytitle"><a href="re393.html">
   ..//drivers/dma-buf/seqno-fence.c
  </a></span><span class="refpurpose"> — 
   Document generation inconsistency
  </span></dt><dt><span class="refentrytitle"><a href="API-struct-fence.html"><span class="phrase">struct fence</span></a></span><span class="refpurpose"> — 
  software synchronization primitive
 </span></dt><dt><span class="refentrytitle"><a href="API-struct-fence-cb.html"><span class="phrase">struct fence_cb</span></a></span><span class="refpurpose"> — 
     callback for fence_add_callback
 </span></dt><dt><span class="refentrytitle"><a href="API-struct-fence-ops.html"><span class="phrase">struct fence_ops</span></a></span><span class="refpurpose"> — 
     operations implemented for fence
 </span></dt><dt><span class="refentrytitle"><a href="API-fence-get.html"><span class="phrase">fence_get</span></a></span><span class="refpurpose"> — 
     increases refcount of the fence
 </span></dt><dt><span class="refentrytitle"><a href="API-fence-get-rcu.html"><span class="phrase">fence_get_rcu</span></a></span><span class="refpurpose"> — 
     get a fence from a reservation_object_list with rcu read lock
 </span></dt><dt><span class="refentrytitle"><a href="API-fence-put.html"><span class="phrase">fence_put</span></a></span><span class="refpurpose"> — 
     decreases refcount of the fence
 </span></dt><dt><span class="refentrytitle"><a href="API-fence-is-signaled-locked.html"><span class="phrase">fence_is_signaled_locked</span></a></span><span class="refpurpose"> — 
     Return an indication if the fence is signaled yet.
 </span></dt><dt><span class="refentrytitle"><a href="API-fence-is-signaled.html"><span class="phrase">fence_is_signaled</span></a></span><span class="refpurpose"> — 
     Return an indication if the fence is signaled yet.
 </span></dt><dt><span class="refentrytitle"><a href="API-fence-later.html"><span class="phrase">fence_later</span></a></span><span class="refpurpose"> — 
     return the chronologically later fence
 </span></dt><dt><span class="refentrytitle"><a href="API-fence-wait.html"><span class="phrase">fence_wait</span></a></span><span class="refpurpose"> — 
     sleep until the fence gets signaled
 </span></dt><dt><span class="refentrytitle"><a href="API-to-seqno-fence.html"><span class="phrase">to_seqno_fence</span></a></span><span class="refpurpose"> — 
  cast a fence to a seqno_fence
 </span></dt><dt><span class="refentrytitle"><a href="API-seqno-fence-init.html"><span class="phrase">seqno_fence_init</span></a></span><span class="refpurpose"> — 
     initialize a seqno fence
 </span></dt><dt><span class="refentrytitle"><a href="re406.html">
   ..//drivers/dma-buf/reservation.c
  </a></span><span class="refpurpose"> — 
   Document generation inconsistency
  </span></dt><dt><span class="refentrytitle"><a href="re407.html">
   ..//include/linux/reservation.h
  </a></span><span class="refpurpose"> — 
   Document generation inconsistency
  </span></dt><dt><span class="refentrytitle"><a href="API-dma-alloc-from-coherent.html"><span class="phrase">dma_alloc_from_coherent</span></a></span><span class="refpurpose"> — 
  try to allocate memory from the per-device coherent area
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-release-from-coherent.html"><span class="phrase">dma_release_from_coherent</span></a></span><span class="refpurpose"> — 
     try to free the memory allocated from per-device coherent memory pool
 </span></dt><dt><span class="refentrytitle"><a href="API-dma-mmap-from-coherent.html"><span class="phrase">dma_mmap_from_coherent</span></a></span><span class="refpurpose"> — 
     try to mmap the memory allocated from per-device coherent memory pool to userspace
 </span></dt><dt><span class="refentrytitle"><a href="API-dmam-alloc-coherent.html"><span class="phrase">dmam_alloc_coherent</span></a></span><span class="refpurpose"> — 
  Managed <code class="function">dma_alloc_coherent</code>
 </span></dt><dt><span class="refentrytitle"><a href="API-dmam-free-coherent.html"><span class="phrase">dmam_free_coherent</span></a></span><span class="refpurpose"> — 
     Managed <code class="function">dma_free_coherent</code>
 </span></dt><dt><span class="refentrytitle"><a href="API-dmam-alloc-noncoherent.html"><span class="phrase">dmam_alloc_noncoherent</span></a></span><span class="refpurpose"> — 
     Managed <code class="function">dma_alloc_non_coherent</code>
 </span></dt><dt><span class="refentrytitle"><a href="API-dmam-free-noncoherent.html"><span class="phrase">dmam_free_noncoherent</span></a></span><span class="refpurpose"> — 
     Managed <code class="function">dma_free_noncoherent</code>
 </span></dt><dt><span class="refentrytitle"><a href="API-dmam-declare-coherent-memory.html"><span class="phrase">dmam_declare_coherent_memory</span></a></span><span class="refpurpose"> — 
     Managed <code class="function">dma_declare_coherent_memory</code>
 </span></dt><dt><span class="refentrytitle"><a href="API-dmam-release-declared-memory.html"><span class="phrase">dmam_release_declared_memory</span></a></span><span class="refpurpose"> — 
     Managed <code class="function">dma_release_declared_memory</code>.
 </span></dt></dl></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="API-subsys-virtual-register.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="devdrivers.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="API-dma-buf-export-named.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"><span class="phrase">subsys_virtual_register</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> <span class="phrase">dma_buf_export_named</span></td></tr></table></div></body></html>
