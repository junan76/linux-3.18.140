<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>synchronize_sched</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="Linux Device Drivers"><link rel="up" href="ch01s09.html" title="Kernel utility functions"><link rel="prev" href="API-rcu-is-watching.html" title="rcu_is_watching"><link rel="next" href="API-synchronize-rcu-bh.html" title="synchronize_rcu_bh"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center"><span class="phrase">synchronize_sched</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="API-rcu-is-watching.html">Prev</a> </td><th width="60%" align="center">Kernel utility functions</th><td width="20%" align="right"> <a accesskey="n" href="API-synchronize-rcu-bh.html">Next</a></td></tr></table><hr></div><div class="refentry"><a name="API-synchronize-sched"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>synchronize_sched — 
     wait until an rcu-sched grace period has elapsed.
 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tr><td><code class="funcdef">void <b class="fsfunc">synchronize_sched </b>(</code></td><td> <var class="pdparam">void</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div></div><div class="refsect1"><a name="idm9325"></a><h2>Arguments</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="parameter"><code>void</code></em></span></dt><dd><p>
     no arguments
    </p></dd></dl></div></div><div class="refsect1"><a name="idm9333"></a><h2>Description</h2><p>
   </p><p>

   Control will return to the caller some time after a full rcu-sched
   grace period has elapsed, in other words after all currently executing
   rcu-sched read-side critical sections have completed.   These read-side
   critical sections are delimited by <code class="function">rcu_read_lock_sched</code> and
   <code class="function">rcu_read_unlock_sched</code>, and may be nested.  Note that <code class="function">preempt_disable</code>,
   <code class="function">local_irq_disable</code>, and so on may be used in place of
   <code class="function">rcu_read_lock_sched</code>.
   </p><p>

   This means that all preempt_disable code sequences, including NMI and
   non-threaded hardware-interrupt handlers, in progress on entry will
   have completed before this primitive returns.  However, this does not
   guarantee that softirq handlers will have completed, since in some
   kernels, these handlers can run in process context, and can block.
   </p><p>

   Note that this guarantee implies further memory-ordering guarantees.
   On systems with more than one CPU, when <code class="function">synchronize_sched</code> returns,
   each CPU is guaranteed to have executed a full memory barrier since the
   end of its last RCU-sched read-side critical section whose beginning
   preceded the call to <code class="function">synchronize_sched</code>.  In addition, each CPU having
   an RCU read-side critical section that extends beyond the return from
   <code class="function">synchronize_sched</code> is guaranteed to have executed a full memory barrier
   after the beginning of <code class="function">synchronize_sched</code> and before the beginning of
   that RCU read-side critical section.  Note that these guarantees include
   CPUs that are offline, idle, or executing in user mode, as well as CPUs
   that are executing in the kernel.
   </p><p>

   Furthermore, if CPU A invoked <code class="function">synchronize_sched</code>, which returned
   to its caller on CPU B, then both CPU A and CPU B are guaranteed
   to have executed a full memory barrier during the execution of
   <code class="function">synchronize_sched</code> -- even if CPU A and CPU B are the same CPU (but
   again only if the system has more than one CPU).
   </p><p>

   This primitive provides the guarantees made by the (now removed)
   <code class="function">synchronize_kernel</code> API.  In contrast, <code class="function">synchronize_rcu</code> only
   guarantees that <code class="function">rcu_read_lock</code> sections will have completed.
   In <span class="quote">“<span class="quote">classic RCU</span>”</span>, these two guarantees happen to be one and
   the same, but can differ in realtime RCU implementations.
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="API-rcu-is-watching.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch01s09.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="API-synchronize-rcu-bh.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"><span class="phrase">rcu_is_watching</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> <span class="phrase">synchronize_rcu_bh</span></td></tr></table></div></body></html>
