<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>kobject_add</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="Linux Device Drivers"><link rel="up" href="ch01s08.html" title="Kernel objects manipulation"><link rel="prev" href="API-kobject-init.html" title="kobject_init"><link rel="next" href="API-kobject-init-and-add.html" title="kobject_init_and_add"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center"><span class="phrase">kobject_add</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="API-kobject-init.html">Prev</a> </td><th width="60%" align="center">Kernel objects manipulation</th><td width="20%" align="right"> <a accesskey="n" href="API-kobject-init-and-add.html">Next</a></td></tr></table><hr></div><div class="refentry"><a name="API-kobject-add"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>kobject_add — 
     the main kobject add function
 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tr><td><code class="funcdef">int <b class="fsfunc">kobject_add </b>(</code></td><td>struct kobject * <var class="pdparam">kobj</var>, </td></tr><tr><td> </td><td>struct kobject * <var class="pdparam">parent</var>, </td></tr><tr><td> </td><td>const char * <var class="pdparam">fmt</var>, </td></tr><tr><td> </td><td> <var class="pdparam">...</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div></div><div class="refsect1"><a name="idm7517"></a><h2>Arguments</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="parameter"><code>kobj</code></em></span></dt><dd><p>
     the kobject to add
    </p></dd><dt><span class="term"><em class="parameter"><code>parent</code></em></span></dt><dd><p>
     pointer to the parent of the kobject.
    </p></dd><dt><span class="term"><em class="parameter"><code>fmt</code></em></span></dt><dd><p>
     format to name the kobject with.
    </p></dd><dt><span class="term"><em class="parameter"><code>...</code></em></span></dt><dd><p>
     variable arguments
    </p></dd></dl></div></div><div class="refsect1"><a name="idm7540"></a><h2>Description</h2><p>
   The kobject name is set and added to the kobject hierarchy in this
   function.
   </p><p>

   If <em class="parameter"><code>parent</code></em> is set, then the parent of the <em class="parameter"><code>kobj</code></em> will be set to it.
   If <em class="parameter"><code>parent</code></em> is NULL, then the parent of the <em class="parameter"><code>kobj</code></em> will be set to the
   kobject associated with the kset assigned to this kobject.  If no kset
   is assigned to the kobject, then the kobject will be located in the
   root of the sysfs tree.
   </p><p>

   If this function returns an error, <code class="function">kobject_put</code> must be called to
   properly clean up the memory associated with the object.
   Under no instance should the kobject that is passed to this function
   be directly freed with a call to <code class="function">kfree</code>, that can leak memory.
   </p><p>

   Note, no <span class="quote">“<span class="quote">add</span>”</span> uevent will be created with this call, the caller should set
   up all of the necessary sysfs files for the object and then call
   <code class="function">kobject_uevent</code> with the UEVENT_ADD parameter to ensure that
   userspace is properly notified of this kobject's creation.
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="API-kobject-init.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch01s08.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="API-kobject-init-and-add.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"><span class="phrase">kobject_init</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> <span class="phrase">kobject_init_and_add</span></td></tr></table></div></body></html>
