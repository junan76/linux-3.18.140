<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 3. Management of Cards and Components</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="Writing an ALSA Driver"><link rel="up" href="index.html" title="Writing an ALSA Driver"><link rel="prev" href="basic-flow-header-files.html" title="Header Files"><link rel="next" href="card-management-component.html" title="Components"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 3. Management of Cards and Components</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="basic-flow-header-files.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="card-management-component.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="card-management"></a>Chapter 3. Management of Cards and Components</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="card-management.html#card-management-card-instance">Card Instance</a></span></dt><dt><span class="section"><a href="card-management-component.html">Components</a></span></dt><dt><span class="section"><a href="card-management-chip-specific.html">Chip-Specific Data</a></span></dt><dd><dl><dt><span class="section"><a href="card-management-chip-specific.html#card-management-chip-specific-snd-card-new">1. Allocating via <code class="function">snd_card_new()</code>.</a></span></dt><dt><span class="section"><a href="card-management-chip-specific.html#card-management-chip-specific-allocate-extra">2. Allocating an extra device.</a></span></dt></dl></dd><dt><span class="section"><a href="card-management-registration.html">Registration and Release</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="card-management-card-instance"></a>Card Instance</h2></div></div></div><p>
      For each soundcard, a <span class="quote">“<span class="quote">card</span>”</span> record must be allocated.
      </p><p>
      A card record is the headquarters of the soundcard.  It manages
      the whole list of devices (components) on the soundcard, such as
      PCM, mixers, MIDI, synthesizer, and so on.  Also, the card
      record holds the ID and the name strings of the card, manages
      the root of proc files, and controls the power-management states
      and hotplug disconnections.  The component list on the card
      record is used to manage the correct release of resources at
      destruction. 
      </p><p>
        As mentioned above, to create a card instance, call
      <code class="function">snd_card_new()</code>.

        </p><div class="informalexample"><pre class="programlisting">

  struct snd_card *card;
  int err;
  err = snd_card_new(&amp;pci-&gt;dev, index, id, module, extra_size, &amp;card);

          </pre></div><p>
      </p><p>
        The function takes six arguments: the parent device pointer,
        the card-index number, the id string, the module pointer (usually
        <code class="constant">THIS_MODULE</code>),
        the size of extra-data space, and the pointer to return the
        card instance.  The extra_size argument is used to
        allocate card-&gt;private_data for the
        chip-specific data.  Note that these data
        are allocated by <code class="function">snd_card_new()</code>.
      </p><p>
	The first argument, the pointer of struct
	<span class="structname">device</span>, specifies the parent device.
	For PCI devices, typically &amp;pci-&gt; is passed there.
      </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="basic-flow-header-files.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="card-management-component.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Header Files </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Components</td></tr></table></div></body></html>
