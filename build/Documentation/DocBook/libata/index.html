<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>libATA Developer's Guide</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="libATA Developer's Guide"><link rel="next" href="libataIntroduction.html" title="Chapter 1. Introduction"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">libATA Developer's Guide</th></tr><tr><td width="20%" align="left"> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="libataIntroduction.html">Next</a></td></tr></table><hr></div><div class="book"><div class="titlepage"><div><div><h1 class="title"><a name="libataDevGuide"></a>libATA Developer's Guide</h1></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Jeff</span> <span class="surname">Garzik</span></h3></div></div></div><div><p class="copyright">Copyright © 2003-2006 Jeff Garzik</p></div><div><div class="legalnotice"><a name="idm11"></a><p>
   The contents of this file are subject to the Open
   Software License version 1.1 that can be found at
   <a class="ulink" href="http://fedoraproject.org/wiki/Licensing:OSL1.1" target="_top">http://fedoraproject.org/wiki/Licensing:OSL1.1</a>
   and is included herein by reference.
   </p><p>
   Alternatively, the contents of this file may be used under the terms
   of the GNU General Public License version 2 (the "GPL") as distributed
   in the kernel source COPYING file, in which case the provisions of
   the GPL are applicable instead of the above.  If you wish to allow
   the use of your version of this file only under the terms of the
   GPL and not to allow others to use your version of this file under
   the OSL, indicate your decision by deleting the provisions above and
   replace them with the notice and other provisions required by the GPL.
   If you do not delete the provisions above, a recipient may use your
   version of this file under either the OSL or the GPL.
   </p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="chapter"><a href="libataIntroduction.html">1. Introduction</a></span></dt><dt><span class="chapter"><a href="libataDriverApi.html">2. libata Driver API</a></span></dt><dd><dl><dt><span class="sect1"><a href="libataDriverApi.html#idm24">struct ata_port_operations</a></span></dt><dd><dl><dt><span class="sect2"><a href="libataDriverApi.html#idm26">Disable ATA port</a></span></dt><dt><span class="sect2"><a href="libataDriverApi.html#idm31">Post-IDENTIFY device configuration</a></span></dt><dt><span class="sect2"><a href="libataDriverApi.html#idm36">Set PIO/DMA mode</a></span></dt><dt><span class="sect2"><a href="libataDriverApi.html#idm43">Taskfile read/write</a></span></dt><dt><span class="sect2"><a href="libataDriverApi.html#idm47">PIO data read/write</a></span></dt><dt><span class="sect2"><a href="libataDriverApi.html#idm51">ATA command execute</a></span></dt><dt><span class="sect2"><a href="libataDriverApi.html#idm55">Per-cmd ATAPI DMA capabilities filter</a></span></dt><dt><span class="sect2"><a href="libataDriverApi.html#idm60">Read specific ATA shadow registers</a></span></dt><dt><span class="sect2"><a href="libataDriverApi.html#idm64">Write specific ATA shadow register</a></span></dt><dt><span class="sect2"><a href="libataDriverApi.html#idm68">Select ATA device on bus</a></span></dt><dt><span class="sect2"><a href="libataDriverApi.html#idm73">Private tuning method</a></span></dt><dt><span class="sect2"><a href="libataDriverApi.html#idm79">Control PCI IDE BMDMA engine</a></span></dt><dt><span class="sect2"><a href="libataDriverApi.html#idm88">High-level taskfile hooks</a></span></dt><dt><span class="sect2"><a href="libataDriverApi.html#idm94">Exception and probe handling (EH)</a></span></dt><dt><span class="sect2"><a href="libataDriverApi.html#idm109">Hardware interrupt handling</a></span></dt><dt><span class="sect2"><a href="libataDriverApi.html#idm116">SATA phy read/write</a></span></dt><dt><span class="sect2"><a href="libataDriverApi.html#idm120">Init and shutdown</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="libataEH.html">3. Error handling</a></span></dt><dd><dl><dt><span class="sect1"><a href="libataEH.html#idm130">Origins of commands</a></span></dt><dt><span class="sect1"><a href="ch03s02.html">How commands are issued</a></span></dt><dt><span class="sect1"><a href="ch03s03.html">How commands are processed</a></span></dt><dt><span class="sect1"><a href="ch03s04.html">How commands are completed</a></span></dt><dt><span class="sect1"><a href="ch03s05.html">ata_scsi_error()</a></span></dt><dt><span class="sect1"><a href="ch03s06.html">Problems with the current EH</a></span></dt></dl></dd><dt><span class="chapter"><a href="libataExt.html">4. libata Library</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="API-ata-link-next.html"><span class="phrase">ata_link_next</span></a></span><span class="refpurpose"> — 
  link iteration helper
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-dev-next.html"><span class="phrase">ata_dev_next</span></a></span><span class="refpurpose"> — 
     device iteration helper
 </span></dt><dt><span class="refentrytitle"><a href="API-atapi-cmd-type.html"><span class="phrase">atapi_cmd_type</span></a></span><span class="refpurpose"> — 
     Determine ATAPI command type from SCSI opcode
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-tf-to-fis.html"><span class="phrase">ata_tf_to_fis</span></a></span><span class="refpurpose"> — 
     Convert ATA taskfile to SATA FIS structure
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-tf-from-fis.html"><span class="phrase">ata_tf_from_fis</span></a></span><span class="refpurpose"> — 
     Convert SATA FIS to ATA taskfile
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-pack-xfermask.html"><span class="phrase">ata_pack_xfermask</span></a></span><span class="refpurpose"> — 
     Pack pio, mwdma and udma masks into xfer_mask
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-unpack-xfermask.html"><span class="phrase">ata_unpack_xfermask</span></a></span><span class="refpurpose"> — 
     Unpack xfer_mask into pio, mwdma and udma masks
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-xfer-mask2mode.html"><span class="phrase">ata_xfer_mask2mode</span></a></span><span class="refpurpose"> — 
     Find matching XFER_* for the given xfer_mask
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-xfer-mode2mask.html"><span class="phrase">ata_xfer_mode2mask</span></a></span><span class="refpurpose"> — 
     Find matching xfer_mask for XFER_*
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-xfer-mode2shift.html"><span class="phrase">ata_xfer_mode2shift</span></a></span><span class="refpurpose"> — 
     Find matching xfer_shift for XFER_*
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-mode-string.html"><span class="phrase">ata_mode_string</span></a></span><span class="refpurpose"> — 
     convert xfer_mask to string
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-dev-classify.html"><span class="phrase">ata_dev_classify</span></a></span><span class="refpurpose"> — 
     determine device type based on ATA-spec signature
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-id-string.html"><span class="phrase">ata_id_string</span></a></span><span class="refpurpose"> — 
     Convert IDENTIFY DEVICE page into string
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-id-c-string.html"><span class="phrase">ata_id_c_string</span></a></span><span class="refpurpose"> — 
     Convert IDENTIFY DEVICE page into C string
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-id-xfermask.html"><span class="phrase">ata_id_xfermask</span></a></span><span class="refpurpose"> — 
     Compute xfermask from the given IDENTIFY data
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-pio-need-iordy.html"><span class="phrase">ata_pio_need_iordy</span></a></span><span class="refpurpose"> — 
     check if iordy needed
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-do-dev-read-id.html"><span class="phrase">ata_do_dev_read_id</span></a></span><span class="refpurpose"> — 
     default ID read method
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-cable-40wire.html"><span class="phrase">ata_cable_40wire</span></a></span><span class="refpurpose"> — 
     return 40 wire cable type
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-cable-80wire.html"><span class="phrase">ata_cable_80wire</span></a></span><span class="refpurpose"> — 
     return 80 wire cable type
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-cable-unknown.html"><span class="phrase">ata_cable_unknown</span></a></span><span class="refpurpose"> — 
     return unknown PATA cable.
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-cable-ignore.html"><span class="phrase">ata_cable_ignore</span></a></span><span class="refpurpose"> — 
     return ignored PATA cable.
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-cable-sata.html"><span class="phrase">ata_cable_sata</span></a></span><span class="refpurpose"> — 
     return SATA cable type
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-dev-pair.html"><span class="phrase">ata_dev_pair</span></a></span><span class="refpurpose"> — 
     return other device on cable
 </span></dt><dt><span class="refentrytitle"><a href="API-sata-set-spd.html"><span class="phrase">sata_set_spd</span></a></span><span class="refpurpose"> — 
     set SATA spd according to spd limit
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-timing-cycle2mode.html"><span class="phrase">ata_timing_cycle2mode</span></a></span><span class="refpurpose"> — 
     find xfer mode for the specified cycle duration
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-do-set-mode.html"><span class="phrase">ata_do_set_mode</span></a></span><span class="refpurpose"> — 
     Program timings and issue SET FEATURES - XFER
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-wait-after-reset.html"><span class="phrase">ata_wait_after_reset</span></a></span><span class="refpurpose"> — 
     wait for link to become ready after reset
 </span></dt><dt><span class="refentrytitle"><a href="API-sata-link-debounce.html"><span class="phrase">sata_link_debounce</span></a></span><span class="refpurpose"> — 
     debounce SATA phy status
 </span></dt><dt><span class="refentrytitle"><a href="API-sata-link-resume.html"><span class="phrase">sata_link_resume</span></a></span><span class="refpurpose"> — 
     resume SATA link
 </span></dt><dt><span class="refentrytitle"><a href="API-sata-link-scr-lpm.html"><span class="phrase">sata_link_scr_lpm</span></a></span><span class="refpurpose"> — 
     manipulate SControl IPM and SPM fields
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-std-prereset.html"><span class="phrase">ata_std_prereset</span></a></span><span class="refpurpose"> — 
     prepare for reset
 </span></dt><dt><span class="refentrytitle"><a href="API-sata-link-hardreset.html"><span class="phrase">sata_link_hardreset</span></a></span><span class="refpurpose"> — 
     reset link via SATA phy reset
 </span></dt><dt><span class="refentrytitle"><a href="API-sata-std-hardreset.html"><span class="phrase">sata_std_hardreset</span></a></span><span class="refpurpose"> — 
     COMRESET w/o waiting or classification
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-std-postreset.html"><span class="phrase">ata_std_postreset</span></a></span><span class="refpurpose"> — 
     standard postreset callback
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-dev-set-feature.html"><span class="phrase">ata_dev_set_feature</span></a></span><span class="refpurpose"> — 
     Issue SET FEATURES - SATA FEATURES
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-std-qc-defer.html"><span class="phrase">ata_std_qc_defer</span></a></span><span class="refpurpose"> — 
     Check whether a qc needs to be deferred
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-sg-init.html"><span class="phrase">ata_sg_init</span></a></span><span class="refpurpose"> — 
     Associate command with scatter-gather table.
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-qc-complete.html"><span class="phrase">ata_qc_complete</span></a></span><span class="refpurpose"> — 
     Complete an active ATA command
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-qc-complete-multiple.html"><span class="phrase">ata_qc_complete_multiple</span></a></span><span class="refpurpose"> — 
     Complete multiple qcs successfully
 </span></dt><dt><span class="refentrytitle"><a href="API-sata-scr-valid.html"><span class="phrase">sata_scr_valid</span></a></span><span class="refpurpose"> — 
     test whether SCRs are accessible
 </span></dt><dt><span class="refentrytitle"><a href="API-sata-scr-read.html"><span class="phrase">sata_scr_read</span></a></span><span class="refpurpose"> — 
     read SCR register of the specified port
 </span></dt><dt><span class="refentrytitle"><a href="API-sata-scr-write.html"><span class="phrase">sata_scr_write</span></a></span><span class="refpurpose"> — 
     write SCR register of the specified port
 </span></dt><dt><span class="refentrytitle"><a href="API-sata-scr-write-flush.html"><span class="phrase">sata_scr_write_flush</span></a></span><span class="refpurpose"> — 
     write SCR register of the specified port and flush
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-link-online.html"><span class="phrase">ata_link_online</span></a></span><span class="refpurpose"> — 
     test whether the given link is online
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-link-offline.html"><span class="phrase">ata_link_offline</span></a></span><span class="refpurpose"> — 
     test whether the given link is offline
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-host-suspend.html"><span class="phrase">ata_host_suspend</span></a></span><span class="refpurpose"> — 
     suspend host
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-host-resume.html"><span class="phrase">ata_host_resume</span></a></span><span class="refpurpose"> — 
     resume host
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-host-alloc.html"><span class="phrase">ata_host_alloc</span></a></span><span class="refpurpose"> — 
     allocate and init basic ATA host resources
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-host-alloc-pinfo.html"><span class="phrase">ata_host_alloc_pinfo</span></a></span><span class="refpurpose"> — 
     alloc host and init with port_info array
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-slave-link-init.html"><span class="phrase">ata_slave_link_init</span></a></span><span class="refpurpose"> — 
     initialize slave link
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-host-start.html"><span class="phrase">ata_host_start</span></a></span><span class="refpurpose"> — 
     start and freeze ports of an ATA host
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-host-init.html"><span class="phrase">ata_host_init</span></a></span><span class="refpurpose"> — 
     Initialize a host struct for sas (ipr, libsas)
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-host-register.html"><span class="phrase">ata_host_register</span></a></span><span class="refpurpose"> — 
     register initialized ATA host
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-host-activate.html"><span class="phrase">ata_host_activate</span></a></span><span class="refpurpose"> — 
     start host, request IRQ and register it
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-host-detach.html"><span class="phrase">ata_host_detach</span></a></span><span class="refpurpose"> — 
     Detach all ports of an ATA host
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-pci-remove-one.html"><span class="phrase">ata_pci_remove_one</span></a></span><span class="refpurpose"> — 
     PCI layer callback for device removal
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-platform-remove-one.html"><span class="phrase">ata_platform_remove_one</span></a></span><span class="refpurpose"> — 
     Platform layer callback for device removal
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-msleep.html"><span class="phrase">ata_msleep</span></a></span><span class="refpurpose"> — 
     ATA EH owner aware msleep
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-wait-register.html"><span class="phrase">ata_wait_register</span></a></span><span class="refpurpose"> — 
     wait until register value changes
 </span></dt><dt><span class="refentrytitle"><a href="API-sata-lpm-ignore-phy-events.html"><span class="phrase">sata_lpm_ignore_phy_events</span></a></span><span class="refpurpose"> — 
     test if PHY event should be ignored
 </span></dt></dl></dd><dt><span class="chapter"><a href="libataInt.html">5. libata Core Internals</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="API-ata-dev-phys-link.html"><span class="phrase">ata_dev_phys_link</span></a></span><span class="refpurpose"> — 
  find physical link for a device
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-force-cbl.html"><span class="phrase">ata_force_cbl</span></a></span><span class="refpurpose"> — 
     force cable type according to libata.force
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-force-link-limits.html"><span class="phrase">ata_force_link_limits</span></a></span><span class="refpurpose"> — 
     force link limits according to libata.force
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-force-xfermask.html"><span class="phrase">ata_force_xfermask</span></a></span><span class="refpurpose"> — 
     force xfermask according to libata.force
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-force-horkage.html"><span class="phrase">ata_force_horkage</span></a></span><span class="refpurpose"> — 
     force horkage according to libata.force
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-rwcmd-protocol.html"><span class="phrase">ata_rwcmd_protocol</span></a></span><span class="refpurpose"> — 
     set taskfile r/w commands and protocol
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-tf-read-block.html"><span class="phrase">ata_tf_read_block</span></a></span><span class="refpurpose"> — 
     Read block address from ATA taskfile
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-build-rw-tf.html"><span class="phrase">ata_build_rw_tf</span></a></span><span class="refpurpose"> — 
     Build ATA taskfile for given read/write request
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-read-native-max-address.html"><span class="phrase">ata_read_native_max_address</span></a></span><span class="refpurpose"> — 
     Read native max address
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-set-max-sectors.html"><span class="phrase">ata_set_max_sectors</span></a></span><span class="refpurpose"> — 
     Set max sectors
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-hpa-resize.html"><span class="phrase">ata_hpa_resize</span></a></span><span class="refpurpose"> — 
     Resize a device with an HPA set
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-dump-id.html"><span class="phrase">ata_dump_id</span></a></span><span class="refpurpose"> — 
     IDENTIFY DEVICE info debugging output
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-exec-internal-sg.html"><span class="phrase">ata_exec_internal_sg</span></a></span><span class="refpurpose"> — 
     execute libata internal command
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-exec-internal.html"><span class="phrase">ata_exec_internal</span></a></span><span class="refpurpose"> — 
     execute libata internal command
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-do-simple-cmd.html"><span class="phrase">ata_do_simple_cmd</span></a></span><span class="refpurpose"> — 
     execute simple internal command
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-pio-mask-no-iordy.html"><span class="phrase">ata_pio_mask_no_iordy</span></a></span><span class="refpurpose"> — 
     Return the non IORDY mask
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-dev-read-id.html"><span class="phrase">ata_dev_read_id</span></a></span><span class="refpurpose"> — 
     Read ID data from the specified device
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-dev-configure.html"><span class="phrase">ata_dev_configure</span></a></span><span class="refpurpose"> — 
     Configure the specified ATA/ATAPI device
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-bus-probe.html"><span class="phrase">ata_bus_probe</span></a></span><span class="refpurpose"> — 
     Reset and probe ATA bus
 </span></dt><dt><span class="refentrytitle"><a href="API-sata-print-link-status.html"><span class="phrase">sata_print_link_status</span></a></span><span class="refpurpose"> — 
     Print SATA link status
 </span></dt><dt><span class="refentrytitle"><a href="API-sata-down-spd-limit.html"><span class="phrase">sata_down_spd_limit</span></a></span><span class="refpurpose"> — 
     adjust SATA spd limit downward
 </span></dt><dt><span class="refentrytitle"><a href="API-sata-set-spd-needed.html"><span class="phrase">sata_set_spd_needed</span></a></span><span class="refpurpose"> — 
     is SATA spd configuration needed
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-down-xfermask-limit.html"><span class="phrase">ata_down_xfermask_limit</span></a></span><span class="refpurpose"> — 
     adjust dev xfer masks downward
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-wait-ready.html"><span class="phrase">ata_wait_ready</span></a></span><span class="refpurpose"> — 
     wait for link to become ready
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-dev-same-device.html"><span class="phrase">ata_dev_same_device</span></a></span><span class="refpurpose"> — 
     Determine whether new ID matches configured device
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-dev-reread-id.html"><span class="phrase">ata_dev_reread_id</span></a></span><span class="refpurpose"> — 
     Re-read IDENTIFY data
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-dev-revalidate.html"><span class="phrase">ata_dev_revalidate</span></a></span><span class="refpurpose"> — 
     Revalidate ATA device
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-is-40wire.html"><span class="phrase">ata_is_40wire</span></a></span><span class="refpurpose"> — 
     check drive side detection
 </span></dt><dt><span class="refentrytitle"><a href="API-cable-is-40wire.html"><span class="phrase">cable_is_40wire</span></a></span><span class="refpurpose"> — 
     40/80/SATA decider
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-dev-xfermask.html"><span class="phrase">ata_dev_xfermask</span></a></span><span class="refpurpose"> — 
     Compute supported xfermask of the given device
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-dev-set-xfermode.html"><span class="phrase">ata_dev_set_xfermode</span></a></span><span class="refpurpose"> — 
     Issue SET FEATURES - XFER MODE command
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-dev-init-params.html"><span class="phrase">ata_dev_init_params</span></a></span><span class="refpurpose"> — 
     Issue INIT DEV PARAMS command
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-sg-clean.html"><span class="phrase">ata_sg_clean</span></a></span><span class="refpurpose"> — 
     Unmap DMA memory associated with command
 </span></dt><dt><span class="refentrytitle"><a href="API-atapi-check-dma.html"><span class="phrase">atapi_check_dma</span></a></span><span class="refpurpose"> — 
     Check whether ATAPI DMA can be supported
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-sg-setup.html"><span class="phrase">ata_sg_setup</span></a></span><span class="refpurpose"> — 
     DMA-map the scatter-gather table associated with a command.
 </span></dt><dt><span class="refentrytitle"><a href="API-swap-buf-le16.html"><span class="phrase">swap_buf_le16</span></a></span><span class="refpurpose"> — 
     swap halves of 16-bit words in place
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-qc-new.html"><span class="phrase">ata_qc_new</span></a></span><span class="refpurpose"> — 
     Request an available ATA command, for queueing
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-qc-new-init.html"><span class="phrase">ata_qc_new_init</span></a></span><span class="refpurpose"> — 
     Request an available ATA command, and initialize it
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-qc-free.html"><span class="phrase">ata_qc_free</span></a></span><span class="refpurpose"> — 
     free unused ata_queued_cmd
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-qc-issue.html"><span class="phrase">ata_qc_issue</span></a></span><span class="refpurpose"> — 
     issue taskfile to device
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-phys-link-online.html"><span class="phrase">ata_phys_link_online</span></a></span><span class="refpurpose"> — 
     test whether the given link is online
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-phys-link-offline.html"><span class="phrase">ata_phys_link_offline</span></a></span><span class="refpurpose"> — 
     test whether the given link is offline
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-dev-init.html"><span class="phrase">ata_dev_init</span></a></span><span class="refpurpose"> — 
     Initialize an ata_device structure
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-link-init.html"><span class="phrase">ata_link_init</span></a></span><span class="refpurpose"> — 
     Initialize an ata_link structure
 </span></dt><dt><span class="refentrytitle"><a href="API-sata-link-init-spd.html"><span class="phrase">sata_link_init_spd</span></a></span><span class="refpurpose"> — 
     Initialize link-&gt;sata_spd_limit
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-port-alloc.html"><span class="phrase">ata_port_alloc</span></a></span><span class="refpurpose"> — 
     allocate and initialize basic ATA port resources
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-finalize-port-ops.html"><span class="phrase">ata_finalize_port_ops</span></a></span><span class="refpurpose"> — 
     finalize ata_port_operations
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-port-detach.html"><span class="phrase">ata_port_detach</span></a></span><span class="refpurpose"> — 
     Detach ATA port in prepration of device removal
 </span></dt></dl></dd><dt><span class="chapter"><a href="libataScsiInt.html">6. libata SCSI translation/emulation</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="API-ata-std-bios-param.html"><span class="phrase">ata_std_bios_param</span></a></span><span class="refpurpose"> — 
  generic bios head/sector/cylinder calculator used by sd.
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-unlock-native-capacity.html"><span class="phrase">ata_scsi_unlock_native_capacity</span></a></span><span class="refpurpose"> — 
     unlock native capacity
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-slave-config.html"><span class="phrase">ata_scsi_slave_config</span></a></span><span class="refpurpose"> — 
     Set SCSI device attributes
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-slave-destroy.html"><span class="phrase">ata_scsi_slave_destroy</span></a></span><span class="refpurpose"> — 
     SCSI device is about to be destroyed
 </span></dt><dt><span class="refentrytitle"><a href="API---ata-change-queue-depth.html"><span class="phrase">__ata_change_queue_depth</span></a></span><span class="refpurpose"> — 
     helper for ata_scsi_change_queue_depth
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-change-queue-depth.html"><span class="phrase">ata_scsi_change_queue_depth</span></a></span><span class="refpurpose"> — 
     SCSI callback for queue depth config
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-queuecmd.html"><span class="phrase">ata_scsi_queuecmd</span></a></span><span class="refpurpose"> — 
     Issue SCSI cdb to libata-managed device
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-simulate.html"><span class="phrase">ata_scsi_simulate</span></a></span><span class="refpurpose"> — 
     simulate SCSI command on ATA device
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-sas-port-alloc.html"><span class="phrase">ata_sas_port_alloc</span></a></span><span class="refpurpose"> — 
     Allocate port for a SAS attached SATA device
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-sas-port-start.html"><span class="phrase">ata_sas_port_start</span></a></span><span class="refpurpose"> — 
     Set port up for dma.
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-sas-port-stop.html"><span class="phrase">ata_sas_port_stop</span></a></span><span class="refpurpose"> — 
     Undo <code class="function">ata_sas_port_start</code>
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-sas-async-probe.html"><span class="phrase">ata_sas_async_probe</span></a></span><span class="refpurpose"> — 
     simply schedule probing and return
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-sas-port-init.html"><span class="phrase">ata_sas_port_init</span></a></span><span class="refpurpose"> — 
     Initialize a SATA device
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-sas-port-destroy.html"><span class="phrase">ata_sas_port_destroy</span></a></span><span class="refpurpose"> — 
     Destroy a SATA port allocated by ata_sas_port_alloc
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-sas-slave-configure.html"><span class="phrase">ata_sas_slave_configure</span></a></span><span class="refpurpose"> — 
     Default slave_config routine for libata devices
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-sas-queuecmd.html"><span class="phrase">ata_sas_queuecmd</span></a></span><span class="refpurpose"> — 
     Issue SCSI cdb to libata-managed device
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-get-identity.html"><span class="phrase">ata_get_identity</span></a></span><span class="refpurpose"> — 
  Handler for HDIO_GET_IDENTITY ioctl
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-cmd-ioctl.html"><span class="phrase">ata_cmd_ioctl</span></a></span><span class="refpurpose"> — 
     Handler for HDIO_DRIVE_CMD ioctl
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-task-ioctl.html"><span class="phrase">ata_task_ioctl</span></a></span><span class="refpurpose"> — 
     Handler for HDIO_DRIVE_TASK ioctl
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-qc-new.html"><span class="phrase">ata_scsi_qc_new</span></a></span><span class="refpurpose"> — 
     acquire new ata_queued_cmd reference
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-dump-status.html"><span class="phrase">ata_dump_status</span></a></span><span class="refpurpose"> — 
     user friendly display of error info
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-to-sense-error.html"><span class="phrase">ata_to_sense_error</span></a></span><span class="refpurpose"> — 
     convert ATA error to SCSI error
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-gen-ata-sense.html"><span class="phrase">ata_gen_ata_sense</span></a></span><span class="refpurpose"> — 
     generate a SCSI fixed sense block
 </span></dt><dt><span class="refentrytitle"><a href="API-atapi-drain-needed.html"><span class="phrase">atapi_drain_needed</span></a></span><span class="refpurpose"> — 
     Check whether data transfer may overflow
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-start-stop-xlat.html"><span class="phrase">ata_scsi_start_stop_xlat</span></a></span><span class="refpurpose"> — 
     Translate SCSI START STOP UNIT command
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-flush-xlat.html"><span class="phrase">ata_scsi_flush_xlat</span></a></span><span class="refpurpose"> — 
     Translate SCSI SYNCHRONIZE CACHE command
 </span></dt><dt><span class="refentrytitle"><a href="API-scsi-6-lba-len.html"><span class="phrase">scsi_6_lba_len</span></a></span><span class="refpurpose"> — 
     Get LBA and transfer length
 </span></dt><dt><span class="refentrytitle"><a href="API-scsi-10-lba-len.html"><span class="phrase">scsi_10_lba_len</span></a></span><span class="refpurpose"> — 
     Get LBA and transfer length
 </span></dt><dt><span class="refentrytitle"><a href="API-scsi-16-lba-len.html"><span class="phrase">scsi_16_lba_len</span></a></span><span class="refpurpose"> — 
     Get LBA and transfer length
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-verify-xlat.html"><span class="phrase">ata_scsi_verify_xlat</span></a></span><span class="refpurpose"> — 
     Translate SCSI VERIFY command into an ATA one
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-rw-xlat.html"><span class="phrase">ata_scsi_rw_xlat</span></a></span><span class="refpurpose"> — 
     Translate SCSI r/w command into an ATA one
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-translate.html"><span class="phrase">ata_scsi_translate</span></a></span><span class="refpurpose"> — 
     Translate then issue SCSI command to ATA device
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-rbuf-get.html"><span class="phrase">ata_scsi_rbuf_get</span></a></span><span class="refpurpose"> — 
     Map response buffer.
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-rbuf-put.html"><span class="phrase">ata_scsi_rbuf_put</span></a></span><span class="refpurpose"> — 
     Unmap response buffer.
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-rbuf-fill.html"><span class="phrase">ata_scsi_rbuf_fill</span></a></span><span class="refpurpose"> — 
     wrapper for SCSI command simulators
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsiop-inq-std.html"><span class="phrase">ata_scsiop_inq_std</span></a></span><span class="refpurpose"> — 
     Simulate INQUIRY command
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsiop-inq-00.html"><span class="phrase">ata_scsiop_inq_00</span></a></span><span class="refpurpose"> — 
     Simulate INQUIRY VPD page 0, list of pages
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsiop-inq-80.html"><span class="phrase">ata_scsiop_inq_80</span></a></span><span class="refpurpose"> — 
     Simulate INQUIRY VPD page 80, device serial number
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsiop-inq-83.html"><span class="phrase">ata_scsiop_inq_83</span></a></span><span class="refpurpose"> — 
     Simulate INQUIRY VPD page 83, device identity
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsiop-inq-89.html"><span class="phrase">ata_scsiop_inq_89</span></a></span><span class="refpurpose"> — 
     Simulate INQUIRY VPD page 89, ATA info
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsiop-noop.html"><span class="phrase">ata_scsiop_noop</span></a></span><span class="refpurpose"> — 
     Command handler that simply returns success.
 </span></dt><dt><span class="refentrytitle"><a href="API-modecpy.html"><span class="phrase">modecpy</span></a></span><span class="refpurpose"> — 
     Prepare response for MODE SENSE
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-msense-caching.html"><span class="phrase">ata_msense_caching</span></a></span><span class="refpurpose"> — 
     Simulate MODE SENSE caching info page
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-msense-ctl-mode.html"><span class="phrase">ata_msense_ctl_mode</span></a></span><span class="refpurpose"> — 
     Simulate MODE SENSE control mode page
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-msense-rw-recovery.html"><span class="phrase">ata_msense_rw_recovery</span></a></span><span class="refpurpose"> — 
     Simulate MODE SENSE r/w error recovery page
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsiop-mode-sense.html"><span class="phrase">ata_scsiop_mode_sense</span></a></span><span class="refpurpose"> — 
     Simulate MODE SENSE 6, 10 commands
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsiop-read-cap.html"><span class="phrase">ata_scsiop_read_cap</span></a></span><span class="refpurpose"> — 
     Simulate READ CAPACITY[ 16] commands
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsiop-report-luns.html"><span class="phrase">ata_scsiop_report_luns</span></a></span><span class="refpurpose"> — 
     Simulate REPORT LUNS command
 </span></dt><dt><span class="refentrytitle"><a href="API-atapi-xlat.html"><span class="phrase">atapi_xlat</span></a></span><span class="refpurpose"> — 
     Initialize PACKET taskfile
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-find-dev.html"><span class="phrase">ata_scsi_find_dev</span></a></span><span class="refpurpose"> — 
     lookup ata_device from scsi_cmnd
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-pass-thru.html"><span class="phrase">ata_scsi_pass_thru</span></a></span><span class="refpurpose"> — 
     convert ATA pass-thru CDB to taskfile
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-mselect-caching.html"><span class="phrase">ata_mselect_caching</span></a></span><span class="refpurpose"> — 
     Simulate MODE SELECT for caching info page
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-mode-select-xlat.html"><span class="phrase">ata_scsi_mode_select_xlat</span></a></span><span class="refpurpose"> — 
     Simulate MODE SELECT 6, 10 commands
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-get-xlat-func.html"><span class="phrase">ata_get_xlat_func</span></a></span><span class="refpurpose"> — 
     check if SCSI to ATA translation is possible
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-dump-cdb.html"><span class="phrase">ata_scsi_dump_cdb</span></a></span><span class="refpurpose"> — 
     dump SCSI command contents to dmesg
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-offline-dev.html"><span class="phrase">ata_scsi_offline_dev</span></a></span><span class="refpurpose"> — 
     offline attached SCSI device
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-remove-dev.html"><span class="phrase">ata_scsi_remove_dev</span></a></span><span class="refpurpose"> — 
     remove attached SCSI device
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-media-change-notify.html"><span class="phrase">ata_scsi_media_change_notify</span></a></span><span class="refpurpose"> — 
     send media change event
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-hotplug.html"><span class="phrase">ata_scsi_hotplug</span></a></span><span class="refpurpose"> — 
     SCSI part of hotplug
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-user-scan.html"><span class="phrase">ata_scsi_user_scan</span></a></span><span class="refpurpose"> — 
     indication for user-initiated bus scan
 </span></dt><dt><span class="refentrytitle"><a href="API-ata-scsi-dev-rescan.html"><span class="phrase">ata_scsi_dev_rescan</span></a></span><span class="refpurpose"> — 
     initiate <code class="function">scsi_rescan_device</code>
 </span></dt></dl></dd><dt><span class="chapter"><a href="ataExceptions.html">7. ATA errors and exceptions</a></span></dt><dd><dl><dt><span class="sect1"><a href="ataExceptions.html#excat">Exception categories</a></span></dt><dd><dl><dt><span class="sect2"><a href="ataExceptions.html#excatHSMviolation">HSM violation</a></span></dt><dt><span class="sect2"><a href="ataExceptions.html#excatDevErr">ATA/ATAPI device error (non-NCQ / non-CHECK CONDITION)</a></span></dt><dt><span class="sect2"><a href="ataExceptions.html#excatATAPIcc">ATAPI device CHECK CONDITION</a></span></dt><dt><span class="sect2"><a href="ataExceptions.html#excatNCQerr">ATA device error (NCQ)</a></span></dt><dt><span class="sect2"><a href="ataExceptions.html#excatATAbusErr">ATA bus error</a></span></dt><dt><span class="sect2"><a href="ataExceptions.html#excatPCIbusErr">PCI bus error</a></span></dt><dt><span class="sect2"><a href="ataExceptions.html#excatLateCompletion">Late completion</a></span></dt><dt><span class="sect2"><a href="ataExceptions.html#excatUnknown">Unknown error (timeout)</a></span></dt><dt><span class="sect2"><a href="ataExceptions.html#excatHoplugPM">Hotplug and power management exceptions</a></span></dt></dl></dd><dt><span class="sect1"><a href="exrec.html">EH recovery actions</a></span></dt><dd><dl><dt><span class="sect2"><a href="exrec.html#exrecClr">Clearing error condition</a></span></dt><dt><span class="sect2"><a href="exrec.html#exrecRst">Reset</a></span></dt><dt><span class="sect2"><a href="exrec.html#exrecReconf">Reconfigure transport</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="PiixInt.html">8. ata_piix Internals</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="API-ich-pata-cable-detect.html"><span class="phrase">ich_pata_cable_detect</span></a></span><span class="refpurpose"> — 
  Probe host controller cable detect info
 </span></dt><dt><span class="refentrytitle"><a href="API-piix-pata-prereset.html"><span class="phrase">piix_pata_prereset</span></a></span><span class="refpurpose"> — 
     prereset for PATA host controller
 </span></dt><dt><span class="refentrytitle"><a href="API-piix-set-piomode.html"><span class="phrase">piix_set_piomode</span></a></span><span class="refpurpose"> — 
     Initialize host controller PATA PIO timings
 </span></dt><dt><span class="refentrytitle"><a href="API-do-pata-set-dmamode.html"><span class="phrase">do_pata_set_dmamode</span></a></span><span class="refpurpose"> — 
     Initialize host controller PATA PIO timings
 </span></dt><dt><span class="refentrytitle"><a href="API-piix-set-dmamode.html"><span class="phrase">piix_set_dmamode</span></a></span><span class="refpurpose"> — 
     Initialize host controller PATA DMA timings
 </span></dt><dt><span class="refentrytitle"><a href="API-ich-set-dmamode.html"><span class="phrase">ich_set_dmamode</span></a></span><span class="refpurpose"> — 
     Initialize host controller PATA DMA timings
 </span></dt><dt><span class="refentrytitle"><a href="API-piix-check-450nx-errata.html"><span class="phrase">piix_check_450nx_errata</span></a></span><span class="refpurpose"> — 
     Check for problem 450NX setup
 </span></dt><dt><span class="refentrytitle"><a href="API-piix-init-one.html"><span class="phrase">piix_init_one</span></a></span><span class="refpurpose"> — 
     Register PIIX ATA PCI device with kernel services
 </span></dt></dl></dd><dt><span class="chapter"><a href="SILInt.html">9. sata_sil Internals</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="API-sil-set-mode.html"><span class="phrase">sil_set_mode</span></a></span><span class="refpurpose"> — 
  wrap set_mode functions
 </span></dt><dt><span class="refentrytitle"><a href="API-sil-dev-config.html"><span class="phrase">sil_dev_config</span></a></span><span class="refpurpose"> — 
     Apply device/host-specific errata fixups
 </span></dt></dl></dd><dt><span class="chapter"><a href="libataThanks.html">10. Thanks</a></span></dt></dl></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="libataIntroduction.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"> </td><td width="40%" align="right" valign="top"> Chapter 1. Introduction</td></tr></table></div></body></html>
